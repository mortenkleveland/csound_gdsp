<!DOCTYPE html>
<html>
<head>
    <title>Csound GDSP</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript" src="wavesurfer.min.js"></script>
    <script type="text/javascript" src="csound.js"></script>
    <script type="text/javascript" src="script.js"></script>
    <script src="jquery.knob.min.js"></script>
</head>

<body>

    <div id="">
    <input type="file" id="openFileButton" value="Open file">
    <input type="button" id="playButton" value="Play">
    <input type="button" id="switchInstanceButton" value="A/B">

    <div class="center" id="potmeters">
        <input class="knob" data-width="150" data-angleOffset="210" angleArc="240" data-fgColor="#C0ffff" data-skin="tron" data-thickness=".1" value="0.5" data-min="0" data-max="1" data-step=".001">
        <input class="knob" data-width="150" data-angleOffset="210" angleArc="240" data-fgColor="#C0ffff" data-skin="tron" data-thickness=".1" value="-90">
        <input class="knob" data-width="150" data-angleOffset="210" angleArc="240" data-fgColor="#C0ffff" data-skin="tron" data-thickness=".1" value="-90"> 
    </div>

    <div id="waveform">
        <div class="progress progress-striped active" id="progress-bar">
            <div class="progress-bar progress-bar-info"></div>
        </div>

        <!-- Here be the waveform -->
    </div>

    <p class="lead pull-center center" id="drop">
        Dra og slipp lydfilen din her.
    </p>

    <textarea id="orchestraField" hidden>
        instr 1
        Sfile = "./local/soundfile"
        kParam1 = .6
        kParam2 = 8000
        kAmp chnget "targetSoundAmplitude"
        aDry diskin2 Sfile, 1, 0, 1
        aDry *= kAmp
        aDry *= 0.5
        aWetL, aWetR reverbsc aDry, aDry, kParam1, kParam2 
        outs aWetL * sqrt(kParam1) + aDry * sqrt(1 - kParam1), aWetR * sqrt(kParam1) + aDry * sqrt(1 - kParam1)
        endin

        instr 2
        Sfile = "./local/soundfile"
        kParam1 chnget "param1"
        kAmp chnget "userSoundAmplitude"
        aDry diskin2 Sfile, 1, 0, 1
        aDry *= kAmp
        aDry *= 0.5
        aWetL, aWetR reverbsc aDry, aDry, kParam1, 8000 
        outs aWetL * sqrt(kParam1) + aDry * sqrt(1 - kParam1), aWetR * sqrt(kParam1) + aDry * sqrt(1 - kParam1)
        endin

        instr 99
        aL chnget "masterL"
        outs aL, aL
        chnclear "masterL"

        endin
    </textarea>
    
    <!--pNaCl csound module-->
    <div id="engine"></div>
</body>
</html>

